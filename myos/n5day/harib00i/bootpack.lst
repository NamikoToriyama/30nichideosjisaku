     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_sprintf
     7 00000000                                 	EXTERN	_io_hlt
     8 00000000                                 	EXTERN	_io_load_eflags
     9 00000000                                 	EXTERN	_io_cli
    10 00000000                                 	EXTERN	_io_out8
    11 00000000                                 	EXTERN	_io_store_eflags
    12 00000000                                 	EXTERN	_hankaku
    13 00000000                                 	EXTERN	_load_gdtr
    14 00000000                                 	EXTERN	_load_idtr
    15 00000000                                 [FILE "bootpack.c"]
    16                                          [SECTION .data]
    17 00000000                                 LC0:
    18 00000000 54 6F 72 69 4E 00               	DB	"ToriN",0x00
    19 00000006                                 LC1:
    20 00000006 48 61 72 69 62 6F 74 65 20 4F   	DB	"Haribote OS.",0x00
       00000010 53 2E 00 
    21 00000013                                 LC2:
    22 00000013 28 25 64 2C 20 25 64 29 00      	DB	"(%d, %d)",0x00
    23                                          [SECTION .text]
    24 00000000                                 	GLOBAL	_HariMain
    25 00000000                                 _HariMain:
    26 00000000 55                              	PUSH	EBP
    27 00000001 89 E5                           	MOV	EBP,ESP
    28 00000003 57                              	PUSH	EDI
    29 00000004 56                              	PUSH	ESI
    30 00000005 53                              	PUSH	EBX
    31 00000006 8D 9D FFFFFEC4                  	LEA	EBX,DWORD [-316+EBP]
    32 0000000C 81 EC 00000130                  	SUB	ESP,304
    33 00000012 E8 000002DA                     	CALL	_init_palette
    34 00000017 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    35 0000001E 50                              	PUSH	EAX
    36 0000001F 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    37 00000026 50                              	PUSH	EAX
    38 00000027 FF 35 00000FF8                  	PUSH	DWORD [4088]
    39 0000002D E8 00000133                     	CALL	_init_screen
    40 00000032 B9 00000002                     	MOV	ECX,2
    41 00000037 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    42 0000003E 8D 50 F0                        	LEA	EDX,DWORD [-16+EAX]
    43 00000041 89 D0                           	MOV	EAX,EDX
    44 00000043 99                              	CDQ
    45 00000044 F7 F9                           	IDIV	ECX
    46 00000046 0F BF 15 00000FF6               	MOVSX	EDX,WORD [4086]
    47 0000004D 83 EA 2C                        	SUB	EDX,44
    48 00000050 89 C7                           	MOV	EDI,EAX
    49 00000052 89 D0                           	MOV	EAX,EDX
    50 00000054 68 [00000000]                   	PUSH	LC0
    51 00000059 99                              	CDQ
    52 0000005A F7 F9                           	IDIV	ECX
    53 0000005C 6A 07                           	PUSH	7
    54 0000005E 89 C6                           	MOV	ESI,EAX
    55 00000060 6A 08                           	PUSH	8
    56 00000062 6A 08                           	PUSH	8
    57 00000064 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    58 0000006B 50                              	PUSH	EAX
    59 0000006C FF 35 00000FF8                  	PUSH	DWORD [4088]
    60 00000072 E8 0000039B                     	CALL	_putfonts8_asc
    61 00000077 83 C4 24                        	ADD	ESP,36
    62 0000007A 68 [00000006]                   	PUSH	LC1
    63 0000007F 6A 00                           	PUSH	0
    64 00000081 6A 1F                           	PUSH	31
    65 00000083 6A 1F                           	PUSH	31
    66 00000085 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    67 0000008C 50                              	PUSH	EAX
    68 0000008D FF 35 00000FF8                  	PUSH	DWORD [4088]
    69 00000093 E8 0000037A                     	CALL	_putfonts8_asc
    70 00000098 68 [00000006]                   	PUSH	LC1
    71 0000009D 6A 07                           	PUSH	7
    72 0000009F 6A 1E                           	PUSH	30
    73 000000A1 6A 1E                           	PUSH	30
    74 000000A3 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    75 000000AA 50                              	PUSH	EAX
    76 000000AB FF 35 00000FF8                  	PUSH	DWORD [4088]
    77 000000B1 E8 0000035C                     	CALL	_putfonts8_asc
    78 000000B6 83 C4 30                        	ADD	ESP,48
    79 000000B9 6A 0E                           	PUSH	14
    80 000000BB 53                              	PUSH	EBX
    81 000000BC E8 000003A0                     	CALL	_init_mouse_cursor8
    82 000000C1 6A 10                           	PUSH	16
    83 000000C3 53                              	PUSH	EBX
    84 000000C4 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
    85 000000C7 56                              	PUSH	ESI
    86 000000C8 57                              	PUSH	EDI
    87 000000C9 6A 10                           	PUSH	16
    88 000000CB 6A 10                           	PUSH	16
    89 000000CD 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
    90 000000D4 50                              	PUSH	EAX
    91 000000D5 FF 35 00000FF8                  	PUSH	DWORD [4088]
    92 000000DB E8 000003DE                     	CALL	_putblock8_8
    93 000000E0 83 C4 28                        	ADD	ESP,40
    94 000000E3 56                              	PUSH	ESI
    95 000000E4 57                              	PUSH	EDI
    96 000000E5 68 [00000013]                   	PUSH	LC2
    97 000000EA 53                              	PUSH	EBX
    98 000000EB E8 [00000000]                   	CALL	_sprintf
    99 000000F0 53                              	PUSH	EBX
   100 000000F1 6A 07                           	PUSH	7
   101 000000F3 6A 32                           	PUSH	50
   102 000000F5 6A 32                           	PUSH	50
   103 000000F7 0F BF 05 00000FF4               	MOVSX	EAX,WORD [4084]
   104 000000FE 50                              	PUSH	EAX
   105 000000FF FF 35 00000FF8                  	PUSH	DWORD [4088]
   106 00000105 E8 00000308                     	CALL	_putfonts8_asc
   107 0000010A 83 C4 28                        	ADD	ESP,40
   108 0000010D                                 L2:
   109 0000010D E8 [00000000]                   	CALL	_io_hlt
   110 00000112 EB F9                           	JMP	L2
   111 00000114                                 	GLOBAL	_boxfill8
   112 00000114                                 _boxfill8:
   113 00000114 55                              	PUSH	EBP
   114 00000115 89 E5                           	MOV	EBP,ESP
   115 00000117 57                              	PUSH	EDI
   116 00000118 56                              	PUSH	ESI
   117 00000119 53                              	PUSH	EBX
   118 0000011A 51                              	PUSH	ECX
   119 0000011B 51                              	PUSH	ECX
   120 0000011C 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   121 0000011F 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   122 00000122 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   123 00000125 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   124 00000128 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   125 0000012B 7F 31                           	JG	L17
   126 0000012D 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   127 00000130 0F AF D9                        	IMUL	EBX,ECX
   128 00000133                                 L15:
   129 00000133 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   130 00000136 39 FA                           	CMP	EDX,EDI
   131 00000138 7F 1B                           	JG	L19
   132 0000013A 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   133 0000013D 01 DE                           	ADD	ESI,EBX
   134 0000013F 01 D6                           	ADD	ESI,EDX
   135 00000141 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   136 00000144                                 L14:
   137 00000144 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   138 00000147 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   139 0000014A 42                              	INC	EDX
   140 0000014B 88 06                           	MOV	BYTE [ESI],AL
   141 0000014D 46                              	INC	ESI
   142 0000014E 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   143 00000151 39 FA                           	CMP	EDX,EDI
   144 00000153 7E EF                           	JLE	L14
   145 00000155                                 L19:
   146 00000155 41                              	INC	ECX
   147 00000156 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   148 00000159 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   149 0000015C 7E D5                           	JLE	L15
   150 0000015E                                 L17:
   151 0000015E 58                              	POP	EAX
   152 0000015F 5A                              	POP	EDX
   153 00000160 5B                              	POP	EBX
   154 00000161 5E                              	POP	ESI
   155 00000162 5F                              	POP	EDI
   156 00000163 5D                              	POP	EBP
   157 00000164 C3                              	RET
   158 00000165                                 	GLOBAL	_init_screen
   159 00000165                                 _init_screen:
   160 00000165 55                              	PUSH	EBP
   161 00000166 89 E5                           	MOV	EBP,ESP
   162 00000168 57                              	PUSH	EDI
   163 00000169 56                              	PUSH	ESI
   164 0000016A 53                              	PUSH	EBX
   165 0000016B 83 EC 10                        	SUB	ESP,16
   166 0000016E 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   167 00000171 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   168 00000174 83 E8 1D                        	SUB	EAX,29
   169 00000177 4F                              	DEC	EDI
   170 00000178 50                              	PUSH	EAX
   171 00000179 57                              	PUSH	EDI
   172 0000017A 6A 00                           	PUSH	0
   173 0000017C 6A 00                           	PUSH	0
   174 0000017E 6A 0E                           	PUSH	14
   175 00000180 FF 75 0C                        	PUSH	DWORD [12+EBP]
   176 00000183 FF 75 08                        	PUSH	DWORD [8+EBP]
   177 00000186 E8 FFFFFF89                     	CALL	_boxfill8
   178 0000018B 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   179 0000018E 83 EE 1C                        	SUB	ESI,28
   180 00000191 56                              	PUSH	ESI
   181 00000192 57                              	PUSH	EDI
   182 00000193 56                              	PUSH	ESI
   183 00000194 6A 00                           	PUSH	0
   184 00000196 6A 08                           	PUSH	8
   185 00000198 FF 75 0C                        	PUSH	DWORD [12+EBP]
   186 0000019B FF 75 08                        	PUSH	DWORD [8+EBP]
   187 0000019E E8 FFFFFF71                     	CALL	_boxfill8
   188 000001A3 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   189 000001A6 83 C4 38                        	ADD	ESP,56
   190 000001A9 83 E8 1B                        	SUB	EAX,27
   191 000001AC 50                              	PUSH	EAX
   192 000001AD 57                              	PUSH	EDI
   193 000001AE 50                              	PUSH	EAX
   194 000001AF 6A 00                           	PUSH	0
   195 000001B1 6A 07                           	PUSH	7
   196 000001B3 FF 75 0C                        	PUSH	DWORD [12+EBP]
   197 000001B6 FF 75 08                        	PUSH	DWORD [8+EBP]
   198 000001B9 E8 FFFFFF56                     	CALL	_boxfill8
   199 000001BE 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   200 000001C1 48                              	DEC	EAX
   201 000001C2 50                              	PUSH	EAX
   202 000001C3 57                              	PUSH	EDI
   203 000001C4 56                              	PUSH	ESI
   204 000001C5 6A 00                           	PUSH	0
   205 000001C7 6A 08                           	PUSH	8
   206 000001C9 FF 75 0C                        	PUSH	DWORD [12+EBP]
   207 000001CC FF 75 08                        	PUSH	DWORD [8+EBP]
   208 000001CF E8 FFFFFF40                     	CALL	_boxfill8
   209 000001D4 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   210 000001D7 83 C4 38                        	ADD	ESP,56
   211 000001DA 83 E8 18                        	SUB	EAX,24
   212 000001DD 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   213 000001E0 50                              	PUSH	EAX
   214 000001E1 6A 3B                           	PUSH	59
   215 000001E3 50                              	PUSH	EAX
   216 000001E4 6A 03                           	PUSH	3
   217 000001E6 6A 07                           	PUSH	7
   218 000001E8 FF 75 0C                        	PUSH	DWORD [12+EBP]
   219 000001EB FF 75 08                        	PUSH	DWORD [8+EBP]
   220 000001EE E8 FFFFFF21                     	CALL	_boxfill8
   221 000001F3 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   222 000001F6 83 E8 04                        	SUB	EAX,4
   223 000001F9 50                              	PUSH	EAX
   224 000001FA 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   225 000001FD 6A 02                           	PUSH	2
   226 000001FF FF 75 F0                        	PUSH	DWORD [-16+EBP]
   227 00000202 6A 02                           	PUSH	2
   228 00000204 6A 07                           	PUSH	7
   229 00000206 FF 75 0C                        	PUSH	DWORD [12+EBP]
   230 00000209 FF 75 08                        	PUSH	DWORD [8+EBP]
   231 0000020C E8 FFFFFF03                     	CALL	_boxfill8
   232 00000211 83 C4 38                        	ADD	ESP,56
   233 00000214 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   234 00000217 6A 3B                           	PUSH	59
   235 00000219 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   236 0000021C 6A 03                           	PUSH	3
   237 0000021E 6A 0F                           	PUSH	15
   238 00000220 FF 75 0C                        	PUSH	DWORD [12+EBP]
   239 00000223 FF 75 08                        	PUSH	DWORD [8+EBP]
   240 00000226 E8 FFFFFEE9                     	CALL	_boxfill8
   241 0000022B 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   242 0000022E 83 E8 05                        	SUB	EAX,5
   243 00000231 50                              	PUSH	EAX
   244 00000232 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   245 00000235 6A 3B                           	PUSH	59
   246 00000237 83 E8 17                        	SUB	EAX,23
   247 0000023A 50                              	PUSH	EAX
   248 0000023B 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   249 0000023E 6A 3B                           	PUSH	59
   250 00000240 6A 0F                           	PUSH	15
   251 00000242 FF 75 0C                        	PUSH	DWORD [12+EBP]
   252 00000245 FF 75 08                        	PUSH	DWORD [8+EBP]
   253 00000248 E8 FFFFFEC7                     	CALL	_boxfill8
   254 0000024D 8B 5D 10                        	MOV	EBX,DWORD [16+EBP]
   255 00000250 83 C4 38                        	ADD	ESP,56
   256 00000253 83 EB 03                        	SUB	EBX,3
   257 00000256 53                              	PUSH	EBX
   258 00000257 6A 3B                           	PUSH	59
   259 00000259 53                              	PUSH	EBX
   260 0000025A 6A 02                           	PUSH	2
   261 0000025C 6A 00                           	PUSH	0
   262 0000025E FF 75 0C                        	PUSH	DWORD [12+EBP]
   263 00000261 FF 75 08                        	PUSH	DWORD [8+EBP]
   264 00000264 E8 FFFFFEAB                     	CALL	_boxfill8
   265 00000269 53                              	PUSH	EBX
   266 0000026A 6A 3C                           	PUSH	60
   267 0000026C FF 75 F0                        	PUSH	DWORD [-16+EBP]
   268 0000026F 6A 3C                           	PUSH	60
   269 00000271 6A 00                           	PUSH	0
   270 00000273 FF 75 0C                        	PUSH	DWORD [12+EBP]
   271 00000276 FF 75 08                        	PUSH	DWORD [8+EBP]
   272 00000279 E8 FFFFFE96                     	CALL	_boxfill8
   273 0000027E 8B 75 0C                        	MOV	ESI,DWORD [12+EBP]
   274 00000281 83 C4 38                        	ADD	ESP,56
   275 00000284 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   276 00000287 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   277 0000028A 83 E8 04                        	SUB	EAX,4
   278 0000028D 83 EE 2F                        	SUB	ESI,47
   279 00000290 50                              	PUSH	EAX
   280 00000291 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
   281 00000294 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   282 00000297 56                              	PUSH	ESI
   283 00000298 6A 0F                           	PUSH	15
   284 0000029A FF 75 0C                        	PUSH	DWORD [12+EBP]
   285 0000029D FF 75 08                        	PUSH	DWORD [8+EBP]
   286 000002A0 E8 FFFFFE6F                     	CALL	_boxfill8
   287 000002A5 FF 75 EC                        	PUSH	DWORD [-20+EBP]
   288 000002A8 56                              	PUSH	ESI
   289 000002A9 FF 75 E8                        	PUSH	DWORD [-24+EBP]
   290 000002AC 56                              	PUSH	ESI
   291 000002AD 6A 0F                           	PUSH	15
   292 000002AF FF 75 0C                        	PUSH	DWORD [12+EBP]
   293 000002B2 FF 75 08                        	PUSH	DWORD [8+EBP]
   294 000002B5 E8 FFFFFE5A                     	CALL	_boxfill8
   295 000002BA 83 C4 38                        	ADD	ESP,56
   296 000002BD 53                              	PUSH	EBX
   297 000002BE FF 75 E4                        	PUSH	DWORD [-28+EBP]
   298 000002C1 53                              	PUSH	EBX
   299 000002C2 56                              	PUSH	ESI
   300 000002C3 6A 07                           	PUSH	7
   301 000002C5 FF 75 0C                        	PUSH	DWORD [12+EBP]
   302 000002C8 FF 75 08                        	PUSH	DWORD [8+EBP]
   303 000002CB E8 FFFFFE44                     	CALL	_boxfill8
   304 000002D0 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   305 000002D3 53                              	PUSH	EBX
   306 000002D4 83 E8 03                        	SUB	EAX,3
   307 000002D7 50                              	PUSH	EAX
   308 000002D8 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   309 000002DB 50                              	PUSH	EAX
   310 000002DC 6A 07                           	PUSH	7
   311 000002DE FF 75 0C                        	PUSH	DWORD [12+EBP]
   312 000002E1 FF 75 08                        	PUSH	DWORD [8+EBP]
   313 000002E4 E8 FFFFFE2B                     	CALL	_boxfill8
   314 000002E9 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   315 000002EC 5B                              	POP	EBX
   316 000002ED 5E                              	POP	ESI
   317 000002EE 5F                              	POP	EDI
   318 000002EF 5D                              	POP	EBP
   319 000002F0 C3                              	RET
   320                                          [SECTION .data]
   321 0000001C                                 _table_rgb.0:
   322 0000001C 00                              	DB	0
   323 0000001D 00                              	DB	0
   324 0000001E 00                              	DB	0
   325 0000001F FF                              	DB	-1
   326 00000020 00                              	DB	0
   327 00000021 00                              	DB	0
   328 00000022 00                              	DB	0
   329 00000023 FF                              	DB	-1
   330 00000024 00                              	DB	0
   331 00000025 FF                              	DB	-1
   332 00000026 FF                              	DB	-1
   333 00000027 00                              	DB	0
   334 00000028 00                              	DB	0
   335 00000029 00                              	DB	0
   336 0000002A FF                              	DB	-1
   337 0000002B FF                              	DB	-1
   338 0000002C 00                              	DB	0
   339 0000002D FF                              	DB	-1
   340 0000002E 00                              	DB	0
   341 0000002F FF                              	DB	-1
   342 00000030 FF                              	DB	-1
   343 00000031 FF                              	DB	-1
   344 00000032 FF                              	DB	-1
   345 00000033 FF                              	DB	-1
   346 00000034 C6                              	DB	-58
   347 00000035 C6                              	DB	-58
   348 00000036 C6                              	DB	-58
   349 00000037 84                              	DB	-124
   350 00000038 00                              	DB	0
   351 00000039 00                              	DB	0
   352 0000003A 00                              	DB	0
   353 0000003B 84                              	DB	-124
   354 0000003C 00                              	DB	0
   355 0000003D 84                              	DB	-124
   356 0000003E 84                              	DB	-124
   357 0000003F 00                              	DB	0
   358 00000040 00                              	DB	0
   359 00000041 00                              	DB	0
   360 00000042 84                              	DB	-124
   361 00000043 84                              	DB	-124
   362 00000044 00                              	DB	0
   363 00000045 84                              	DB	-124
   364 00000046 00                              	DB	0
   365 00000047 84                              	DB	-124
   366 00000048 84                              	DB	-124
   367 00000049 84                              	DB	-124
   368 0000004A 84                              	DB	-124
   369 0000004B 84                              	DB	-124
   370                                          [SECTION .text]
   371 000002F1                                 	GLOBAL	_init_palette
   372 000002F1                                 _init_palette:
   373 000002F1 55                              	PUSH	EBP
   374 000002F2 89 E5                           	MOV	EBP,ESP
   375 000002F4 68 [0000001C]                   	PUSH	_table_rgb.0
   376 000002F9 6A 0F                           	PUSH	15
   377 000002FB 6A 00                           	PUSH	0
   378 000002FD E8 00000002                     	CALL	_set_palette
   379 00000302 C9                              	LEAVE
   380 00000303 C3                              	RET
   381 00000304                                 	GLOBAL	_set_palette
   382 00000304                                 _set_palette:
   383 00000304 55                              	PUSH	EBP
   384 00000305 89 E5                           	MOV	EBP,ESP
   385 00000307 57                              	PUSH	EDI
   386 00000308 56                              	PUSH	ESI
   387 00000309 53                              	PUSH	EBX
   388 0000030A 51                              	PUSH	ECX
   389 0000030B 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   390 0000030E 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   391 00000311 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   392 00000314 E8 [00000000]                   	CALL	_io_load_eflags
   393 00000319 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   394 0000031C E8 [00000000]                   	CALL	_io_cli
   395 00000321 53                              	PUSH	EBX
   396 00000322 68 000003C8                     	PUSH	968
   397 00000327 E8 [00000000]                   	CALL	_io_out8
   398 0000032C 39 FB                           	CMP	EBX,EDI
   399 0000032E 58                              	POP	EAX
   400 0000032F 5A                              	POP	EDX
   401 00000330 7E 12                           	JLE	L27
   402 00000332                                 L29:
   403 00000332 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   404 00000335 89 45 08                        	MOV	DWORD [8+EBP],EAX
   405 00000338 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   406 0000033B 5B                              	POP	EBX
   407 0000033C 5E                              	POP	ESI
   408 0000033D 5F                              	POP	EDI
   409 0000033E 5D                              	POP	EBP
   410 0000033F E9 [00000000]                   	JMP	_io_store_eflags
   411 00000344                                 L27:
   412 00000344 8A 06                           	MOV	AL,BYTE [ESI]
   413 00000346 43                              	INC	EBX
   414 00000347 C0 E8 02                        	SHR	AL,2
   415 0000034A 0F B6 C0                        	MOVZX	EAX,AL
   416 0000034D 50                              	PUSH	EAX
   417 0000034E 68 000003C9                     	PUSH	969
   418 00000353 E8 [00000000]                   	CALL	_io_out8
   419 00000358 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   420 0000035B C0 E8 02                        	SHR	AL,2
   421 0000035E 0F B6 C0                        	MOVZX	EAX,AL
   422 00000361 50                              	PUSH	EAX
   423 00000362 68 000003C9                     	PUSH	969
   424 00000367 E8 [00000000]                   	CALL	_io_out8
   425 0000036C 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   426 0000036F C0 E8 02                        	SHR	AL,2
   427 00000372 83 C6 03                        	ADD	ESI,3
   428 00000375 0F B6 C0                        	MOVZX	EAX,AL
   429 00000378 50                              	PUSH	EAX
   430 00000379 68 000003C9                     	PUSH	969
   431 0000037E E8 [00000000]                   	CALL	_io_out8
   432 00000383 83 C4 18                        	ADD	ESP,24
   433 00000386 39 FB                           	CMP	EBX,EDI
   434 00000388 7E BA                           	JLE	L27
   435 0000038A EB A6                           	JMP	L29
   436 0000038C                                 	GLOBAL	_putfont8
   437 0000038C                                 _putfont8:
   438 0000038C 55                              	PUSH	EBP
   439 0000038D 89 E5                           	MOV	EBP,ESP
   440 0000038F 57                              	PUSH	EDI
   441 00000390 56                              	PUSH	ESI
   442 00000391 31 F6                           	XOR	ESI,ESI
   443 00000393 53                              	PUSH	EBX
   444 00000394 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   445 00000397 8A 5D 18                        	MOV	BL,BYTE [24+EBP]
   446 0000039A                                 L43:
   447 0000039A 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   448 0000039D 8B 55 10                        	MOV	EDX,DWORD [16+EBP]
   449 000003A0 01 F0                           	ADD	EAX,ESI
   450 000003A2 0F AF 45 0C                     	IMUL	EAX,DWORD [12+EBP]
   451 000003A6 03 45 08                        	ADD	EAX,DWORD [8+EBP]
   452 000003A9 8D 0C 02                        	LEA	ECX,DWORD [EDX+EAX*1]
   453 000003AC 8A 14 3E                        	MOV	DL,BYTE [ESI+EDI*1]
   454 000003AF 84 D2                           	TEST	DL,DL
   455 000003B1 79 02                           	JNS	L35
   456 000003B3 88 19                           	MOV	BYTE [ECX],BL
   457 000003B5                                 L35:
   458 000003B5 88 D0                           	MOV	AL,DL
   459 000003B7 83 E0 40                        	AND	EAX,64
   460 000003BA 84 C0                           	TEST	AL,AL
   461 000003BC 74 03                           	JE	L36
   462 000003BE 88 59 01                        	MOV	BYTE [1+ECX],BL
   463 000003C1                                 L36:
   464 000003C1 88 D0                           	MOV	AL,DL
   465 000003C3 83 E0 20                        	AND	EAX,32
   466 000003C6 84 C0                           	TEST	AL,AL
   467 000003C8 74 03                           	JE	L37
   468 000003CA 88 59 02                        	MOV	BYTE [2+ECX],BL
   469 000003CD                                 L37:
   470 000003CD 88 D0                           	MOV	AL,DL
   471 000003CF 83 E0 10                        	AND	EAX,16
   472 000003D2 84 C0                           	TEST	AL,AL
   473 000003D4 74 03                           	JE	L38
   474 000003D6 88 59 03                        	MOV	BYTE [3+ECX],BL
   475 000003D9                                 L38:
   476 000003D9 88 D0                           	MOV	AL,DL
   477 000003DB 83 E0 08                        	AND	EAX,8
   478 000003DE 84 C0                           	TEST	AL,AL
   479 000003E0 74 03                           	JE	L39
   480 000003E2 88 59 04                        	MOV	BYTE [4+ECX],BL
   481 000003E5                                 L39:
   482 000003E5 88 D0                           	MOV	AL,DL
   483 000003E7 83 E0 04                        	AND	EAX,4
   484 000003EA 84 C0                           	TEST	AL,AL
   485 000003EC 74 03                           	JE	L40
   486 000003EE 88 59 05                        	MOV	BYTE [5+ECX],BL
   487 000003F1                                 L40:
   488 000003F1 88 D0                           	MOV	AL,DL
   489 000003F3 83 E0 02                        	AND	EAX,2
   490 000003F6 84 C0                           	TEST	AL,AL
   491 000003F8 74 03                           	JE	L41
   492 000003FA 88 59 06                        	MOV	BYTE [6+ECX],BL
   493 000003FD                                 L41:
   494 000003FD 83 E2 01                        	AND	EDX,1
   495 00000400 84 D2                           	TEST	DL,DL
   496 00000402 74 03                           	JE	L33
   497 00000404 88 59 07                        	MOV	BYTE [7+ECX],BL
   498 00000407                                 L33:
   499 00000407 46                              	INC	ESI
   500 00000408 83 FE 0F                        	CMP	ESI,15
   501 0000040B 7E 8D                           	JLE	L43
   502 0000040D 5B                              	POP	EBX
   503 0000040E 5E                              	POP	ESI
   504 0000040F 5F                              	POP	EDI
   505 00000410 5D                              	POP	EBP
   506 00000411 C3                              	RET
   507 00000412                                 	GLOBAL	_putfonts8_asc
   508 00000412                                 _putfonts8_asc:
   509 00000412 55                              	PUSH	EBP
   510 00000413 89 E5                           	MOV	EBP,ESP
   511 00000415 57                              	PUSH	EDI
   512 00000416 56                              	PUSH	ESI
   513 00000417 53                              	PUSH	EBX
   514 00000418 53                              	PUSH	EBX
   515 00000419 8B 5D 1C                        	MOV	EBX,DWORD [28+EBP]
   516 0000041C 8A 45 18                        	MOV	AL,BYTE [24+EBP]
   517 0000041F 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   518 00000422 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   519 00000425 8B 7D 14                        	MOV	EDI,DWORD [20+EBP]
   520 00000428 80 3B 00                        	CMP	BYTE [EBX],0
   521 0000042B 75 08                           	JNE	L51
   522 0000042D                                 L53:
   523 0000042D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   524 00000430 5B                              	POP	EBX
   525 00000431 5E                              	POP	ESI
   526 00000432 5F                              	POP	EDI
   527 00000433 5D                              	POP	EBP
   528 00000434 C3                              	RET
   529 00000435                                 L51:
   530 00000435 0F B6 03                        	MOVZX	EAX,BYTE [EBX]
   531 00000438 C1 E0 04                        	SAL	EAX,4
   532 0000043B 43                              	INC	EBX
   533 0000043C 05 [00000000]                   	ADD	EAX,_hankaku
   534 00000441 50                              	PUSH	EAX
   535 00000442 0F BE 45 F3                     	MOVSX	EAX,BYTE [-13+EBP]
   536 00000446 50                              	PUSH	EAX
   537 00000447 57                              	PUSH	EDI
   538 00000448 56                              	PUSH	ESI
   539 00000449 83 C6 08                        	ADD	ESI,8
   540 0000044C FF 75 0C                        	PUSH	DWORD [12+EBP]
   541 0000044F FF 75 08                        	PUSH	DWORD [8+EBP]
   542 00000452 E8 FFFFFF35                     	CALL	_putfont8
   543 00000457 83 C4 18                        	ADD	ESP,24
   544 0000045A 80 3B 00                        	CMP	BYTE [EBX],0
   545 0000045D 75 D6                           	JNE	L51
   546 0000045F EB CC                           	JMP	L53
   547                                          [SECTION .data]
   548 0000004C                                 _cursor.1:
   549 0000004C 2A 2A 2A 2A 2A 2A 2A 2A 2A 2A   	DB	"**************.."
       00000056 2A 2A 2A 2A 2E 2E 
   550 0000005C 2A 6F 6F 6F 6F 6F 6F 6F 6F 6F   	DB	"*ooooooooooo*..."
       00000066 6F 6F 2A 2E 2E 2E 
   551 0000006C 2A 6F 6F 6F 6F 6F 6F 6F 6F 6F   	DB	"*oooooooooo*...."
       00000076 6F 2A 2E 2E 2E 2E 
   552 0000007C 2A 6F 6F 6F 6F 6F 6F 6F 6F 6F   	DB	"*ooooooooo*....."
       00000086 2A 2E 2E 2E 2E 2E 
   553 0000008C 2A 6F 6F 6F 6F 6F 6F 6F 6F 2A   	DB	"*oooooooo*......"
       00000096 2E 2E 2E 2E 2E 2E 
   554 0000009C 2A 6F 6F 6F 6F 6F 6F 6F 2A 2E   	DB	"*ooooooo*......."
       000000A6 2E 2E 2E 2E 2E 2E 
   555 000000AC 2A 6F 6F 6F 6F 6F 6F 6F 2A 2E   	DB	"*ooooooo*......."
       000000B6 2E 2E 2E 2E 2E 2E 
   556 000000BC 2A 6F 6F 6F 6F 6F 6F 6F 6F 2A   	DB	"*oooooooo*......"
       000000C6 2E 2E 2E 2E 2E 2E 
   557 000000CC 2A 6F 6F 6F 6F 2A 2A 6F 6F 6F   	DB	"*oooo**ooo*....."
       000000D6 2A 2E 2E 2E 2E 2E 
   558 000000DC 2A 6F 6F 6F 2A 2E 2E 2A 6F 6F   	DB	"*ooo*..*ooo*...."
       000000E6 6F 2A 2E 2E 2E 2E 
   559 000000EC 2A 6F 6F 2A 2E 2E 2E 2E 2A 6F   	DB	"*oo*....*ooo*..."
       000000F6 6F 6F 2A 2E 2E 2E 
   560 000000FC 2A 6F 2A 2E 2E 2E 2E 2E 2E 2A   	DB	"*o*......*ooo*.."
       00000106 6F 6F 6F 2A 2E 2E 
   561 0000010C 2A 2A 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"**........*ooo*."
       00000116 2A 6F 6F 6F 2A 2E 
   562 0000011C 2A 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"*..........*ooo*"
       00000126 2E 2A 6F 6F 6F 2A 
   563 0000012C 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	"............*oo*"
       00000136 2E 2E 2A 6F 6F 2A 
   564 0000013C 2E 2E 2E 2E 2E 2E 2E 2E 2E 2E   	DB	".............***"
       00000146 2E 2E 2E 2A 2A 2A 
   565                                          [SECTION .text]
   566 00000461                                 	GLOBAL	_init_mouse_cursor8
   567 00000461                                 _init_mouse_cursor8:
   568 00000461 55                              	PUSH	EBP
   569 00000462 89 E5                           	MOV	EBP,ESP
   570 00000464 57                              	PUSH	EDI
   571 00000465 56                              	PUSH	ESI
   572 00000466 53                              	PUSH	EBX
   573 00000467 31 DB                           	XOR	EBX,EBX
   574 00000469 57                              	PUSH	EDI
   575 0000046A 31 FF                           	XOR	EDI,EDI
   576 0000046C 8A 45 0C                        	MOV	AL,BYTE [12+EBP]
   577 0000046F 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   578 00000472 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   579 00000475                                 L67:
   580 00000475 31 D2                           	XOR	EDX,EDX
   581 00000477                                 L66:
   582 00000477 8D 04 3A                        	LEA	EAX,DWORD [EDX+EDI*1]
   583 0000047A 80 B8 [0000004C] 2A             	CMP	BYTE [_cursor.1+EAX],42
   584 00000481 74 35                           	JE	L72
   585 00000483                                 L63:
   586 00000483 80 B8 [0000004C] 6F             	CMP	BYTE [_cursor.1+EAX],111
   587 0000048A 74 26                           	JE	L73
   588 0000048C                                 L64:
   589 0000048C 80 B8 [0000004C] 2E             	CMP	BYTE [_cursor.1+EAX],46
   590 00000493 74 15                           	JE	L74
   591 00000495                                 L61:
   592 00000495 42                              	INC	EDX
   593 00000496 83 FA 0F                        	CMP	EDX,15
   594 00000499 7E DC                           	JLE	L66
   595 0000049B 43                              	INC	EBX
   596 0000049C 83 C7 10                        	ADD	EDI,16
   597 0000049F 83 FB 0F                        	CMP	EBX,15
   598 000004A2 7E D1                           	JLE	L67
   599 000004A4 5E                              	POP	ESI
   600 000004A5 5B                              	POP	EBX
   601 000004A6 5E                              	POP	ESI
   602 000004A7 5F                              	POP	EDI
   603 000004A8 5D                              	POP	EBP
   604 000004A9 C3                              	RET
   605 000004AA                                 L74:
   606 000004AA 8A 4D F3                        	MOV	CL,BYTE [-13+EBP]
   607 000004AD 88 0C 30                        	MOV	BYTE [EAX+ESI*1],CL
   608 000004B0 EB E3                           	JMP	L61
   609 000004B2                                 L73:
   610 000004B2 C6 04 30 07                     	MOV	BYTE [EAX+ESI*1],7
   611 000004B6 EB D4                           	JMP	L64
   612 000004B8                                 L72:
   613 000004B8 C6 04 30 00                     	MOV	BYTE [EAX+ESI*1],0
   614 000004BC EB C5                           	JMP	L63
   615 000004BE                                 	GLOBAL	_putblock8_8
   616 000004BE                                 _putblock8_8:
   617 000004BE 55                              	PUSH	EBP
   618 000004BF 89 E5                           	MOV	EBP,ESP
   619 000004C1 57                              	PUSH	EDI
   620 000004C2 56                              	PUSH	ESI
   621 000004C3 31 F6                           	XOR	ESI,ESI
   622 000004C5 53                              	PUSH	EBX
   623 000004C6 83 EC 0C                        	SUB	ESP,12
   624 000004C9 3B 75 14                        	CMP	ESI,DWORD [20+EBP]
   625 000004CC 7D 3E                           	JGE	L87
   626 000004CE 31 FF                           	XOR	EDI,EDI
   627 000004D0                                 L85:
   628 000004D0 31 DB                           	XOR	EBX,EBX
   629 000004D2 3B 5D 10                        	CMP	EBX,DWORD [16+EBP]
   630 000004D5 7D 2C                           	JGE	L89
   631 000004D7 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
   632 000004DA 01 F8                           	ADD	EAX,EDI
   633 000004DC 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   634 000004DF                                 L84:
   635 000004DF 8B 45 1C                        	MOV	EAX,DWORD [28+EBP]
   636 000004E2 8B 55 18                        	MOV	EDX,DWORD [24+EBP]
   637 000004E5 01 F0                           	ADD	EAX,ESI
   638 000004E7 01 DA                           	ADD	EDX,EBX
   639 000004E9 0F AF 45 0C                     	IMUL	EAX,DWORD [12+EBP]
   640 000004ED 01 D0                           	ADD	EAX,EDX
   641 000004EF 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   642 000004F2 8B 55 EC                        	MOV	EDX,DWORD [-20+EBP]
   643 000004F5 43                              	INC	EBX
   644 000004F6 8A 12                           	MOV	DL,BYTE [EDX]
   645 000004F8 88 14 08                        	MOV	BYTE [EAX+ECX*1],DL
   646 000004FB FF 45 EC                        	INC	DWORD [-20+EBP]
   647 000004FE 3B 5D 10                        	CMP	EBX,DWORD [16+EBP]
   648 00000501 7C DC                           	JL	L84
   649 00000503                                 L89:
   650 00000503 46                              	INC	ESI
   651 00000504 03 7D 24                        	ADD	EDI,DWORD [36+EBP]
   652 00000507 3B 75 14                        	CMP	ESI,DWORD [20+EBP]
   653 0000050A 7C C4                           	JL	L85
   654 0000050C                                 L87:
   655 0000050C 83 C4 0C                        	ADD	ESP,12
   656 0000050F 5B                              	POP	EBX
   657 00000510 5E                              	POP	ESI
   658 00000511 5F                              	POP	EDI
   659 00000512 5D                              	POP	EBP
   660 00000513 C3                              	RET
   661 00000514                                 	GLOBAL	_init_gdtidt
   662 00000514                                 _init_gdtidt:
   663 00000514 55                              	PUSH	EBP
   664 00000515 89 E5                           	MOV	EBP,ESP
   665 00000517 56                              	PUSH	ESI
   666 00000518 53                              	PUSH	EBX
   667 00000519 BE 00270000                     	MOV	ESI,2555904
   668 0000051E BB 00001FFF                     	MOV	EBX,8191
   669 00000523                                 L95:
   670 00000523 6A 00                           	PUSH	0
   671 00000525 6A 00                           	PUSH	0
   672 00000527 6A 00                           	PUSH	0
   673 00000529 56                              	PUSH	ESI
   674 0000052A 83 C6 08                        	ADD	ESI,8
   675 0000052D E8 0000007B                     	CALL	_set_segmdesc
   676 00000532 83 C4 10                        	ADD	ESP,16
   677 00000535 4B                              	DEC	EBX
   678 00000536 79 EB                           	JNS	L95
   679 00000538 68 00004092                     	PUSH	16530
   680 0000053D BE 0026F800                     	MOV	ESI,2553856
   681 00000542 6A 00                           	PUSH	0
   682 00000544 BB 000000FF                     	MOV	EBX,255
   683 00000549 6A FF                           	PUSH	-1
   684 0000054B 68 00270008                     	PUSH	2555912
   685 00000550 E8 00000058                     	CALL	_set_segmdesc
   686 00000555 68 0000409A                     	PUSH	16538
   687 0000055A 68 00280000                     	PUSH	2621440
   688 0000055F 68 0007FFFF                     	PUSH	524287
   689 00000564 68 00270010                     	PUSH	2555920
   690 00000569 E8 0000003F                     	CALL	_set_segmdesc
   691 0000056E 83 C4 20                        	ADD	ESP,32
   692 00000571 68 00270000                     	PUSH	2555904
   693 00000576 68 0000FFFF                     	PUSH	65535
   694 0000057B E8 [00000000]                   	CALL	_load_gdtr
   695 00000580 58                              	POP	EAX
   696 00000581 5A                              	POP	EDX
   697 00000582                                 L100:
   698 00000582 6A 00                           	PUSH	0
   699 00000584 6A 00                           	PUSH	0
   700 00000586 6A 00                           	PUSH	0
   701 00000588 56                              	PUSH	ESI
   702 00000589 83 C6 08                        	ADD	ESI,8
   703 0000058C E8 00000066                     	CALL	_set_gatedesc
   704 00000591 83 C4 10                        	ADD	ESP,16
   705 00000594 4B                              	DEC	EBX
   706 00000595 79 EB                           	JNS	L100
   707 00000597 68 0026F800                     	PUSH	2553856
   708 0000059C 68 000007FF                     	PUSH	2047
   709 000005A1 E8 [00000000]                   	CALL	_load_idtr
   710 000005A6 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   711 000005A9 5B                              	POP	EBX
   712 000005AA 5E                              	POP	ESI
   713 000005AB 5D                              	POP	EBP
   714 000005AC C3                              	RET
   715 000005AD                                 	GLOBAL	_set_segmdesc
   716 000005AD                                 _set_segmdesc:
   717 000005AD 55                              	PUSH	EBP
   718 000005AE 89 E5                           	MOV	EBP,ESP
   719 000005B0 53                              	PUSH	EBX
   720 000005B1 8B 55 0C                        	MOV	EDX,DWORD [12+EBP]
   721 000005B4 8B 4D 10                        	MOV	ECX,DWORD [16+EBP]
   722 000005B7 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   723 000005BA 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   724 000005BD 81 FA 000FFFFF                  	CMP	EDX,1048575
   725 000005C3 76 08                           	JBE	L106
   726 000005C5 C1 EA 0C                        	SHR	EDX,12
   727 000005C8 0D 00008000                     	OR	EAX,32768
   728 000005CD                                 L106:
   729 000005CD 66 89 13                        	MOV	WORD [EBX],DX
   730 000005D0 88 43 05                        	MOV	BYTE [5+EBX],AL
   731 000005D3 C1 EA 10                        	SHR	EDX,16
   732 000005D6 C1 F8 08                        	SAR	EAX,8
   733 000005D9 83 E2 0F                        	AND	EDX,15
   734 000005DC 66 89 4B 02                     	MOV	WORD [2+EBX],CX
   735 000005E0 83 E0 F0                        	AND	EAX,-16
   736 000005E3 C1 F9 10                        	SAR	ECX,16
   737 000005E6 09 C2                           	OR	EDX,EAX
   738 000005E8 88 4B 04                        	MOV	BYTE [4+EBX],CL
   739 000005EB 88 53 06                        	MOV	BYTE [6+EBX],DL
   740 000005EE C1 F9 08                        	SAR	ECX,8
   741 000005F1 88 4B 07                        	MOV	BYTE [7+EBX],CL
   742 000005F4 5B                              	POP	EBX
   743 000005F5 5D                              	POP	EBP
   744 000005F6 C3                              	RET
   745 000005F7                                 	GLOBAL	_set_gatedesc
   746 000005F7                                 _set_gatedesc:
   747 000005F7 55                              	PUSH	EBP
   748 000005F8 89 E5                           	MOV	EBP,ESP
   749 000005FA 53                              	PUSH	EBX
   750 000005FB 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   751 000005FE 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   752 00000601 8B 5D 14                        	MOV	EBX,DWORD [20+EBP]
   753 00000604 8B 4D 0C                        	MOV	ECX,DWORD [12+EBP]
   754 00000607 66 89 42 02                     	MOV	WORD [2+EDX],AX
   755 0000060B 88 5A 05                        	MOV	BYTE [5+EDX],BL
   756 0000060E 66 89 0A                        	MOV	WORD [EDX],CX
   757 00000611 89 D8                           	MOV	EAX,EBX
   758 00000613 C1 F8 08                        	SAR	EAX,8
   759 00000616 C1 F9 10                        	SAR	ECX,16
   760 00000619 88 42 04                        	MOV	BYTE [4+EDX],AL
   761 0000061C 66 89 4A 06                     	MOV	WORD [6+EDX],CX
   762 00000620 5B                              	POP	EBX
   763 00000621 5D                              	POP	EBP
   764 00000622 C3                              	RET
